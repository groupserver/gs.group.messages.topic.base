<html metal:use-macro="context/@@groupserver_site_home_layout/page">
  <head>
    <title metal:fill-slot="title">
      <span tal:define="retval view/update;"
        tal:replace="view/topicName">
        Standard Template for a Single Post
      </span>:
      <span tal:replace="view/groupInfo/name"/>:
      <span tal:replace="view/siteInfo/name"/>
    </title>
    <tal:block metal:fill-slot="metadata" 
      tal:define="topicName view/topicName">
      <link tal:condition="view/previousTopic/topicId" 
        rel="prev" title="Previous topic" href="wibble"
        tal:attributes="href view/previousTopic/topicId; 
        title string:Later topic: ${view/previousTopic/subject}" />
      <link tal:condition="view/nextTopic/topicId" 
        rel="next" title="earlier topic" href="wibble"
        tal:attributes="href view/nextTopic/topicId; 
        title string:Earlier topic: ${view/nextTopic/subject};" />
      <link rel="up" title="All topics" href="#"
        tal:attributes="title view/groupInfo/name;
            href view/groupInfo/relativeURL"/>
      <meta name="description"
            tal:attributes="content python:view.topic[0]['summary']" />
    </tal:block>
  </head>
  
  <body>
    <ul metal:fill-slot="breadcrumb">
      <li><a tal:attributes="title string:${view/siteInfo/name} Homepage"
             href="/" title="Home">&#8962;</a></li>
      <li>
        <a tal:attributes="href view/groupInfo/relativeURL">
          <strong class="group" 
                  tal:content="view/groupInfo/name">This group</strong>
        </a>
      </li>
      <li tal:content="structure view/shortTopicName">Topic</li>
    </ul>
    
    <tal:block content="structure provider:groupserver.FormStatusMessage"
               define="errors view/errors; status view/status; widgets view/widgets"
               metal:fill-slot="messages">&#160;</tal:block>
    <div class="hfeed" metal:fill-slot="body"
         tal:define="topicList view/topic"
         tal:condition="topicList">
      <tal:block replace="structure provider:groupserver.TopicAdmin">
        Topic Administration Tasks
      </tal:block>
      
      <h1 id="gs-group-messages-topic-title">
        <cite tal:attributes="id view/topicId"
              tal:content="view/topicName">This Topic</cite>
      </h1>
      
      <tal:block replace="structure provider:groupserver.TopicPage">
        The bulk of the page
      </tal:block>
    </div><!--hfeed-->
    <tal:block metal:fill-slot="javascript" >
      <tal:block
        content="structure provider:groupserver.TopicJavaScript">
        The JavaScript that is specific to the Topic page.
      </tal:block>
      <script src="/++resource++jquery-ui-1.8.9.custom.min.js" 
              type="text/javascript">&#160;</script>
      <script type="text/javascript">
        var prev = {icons: { primary: "ui-icon-carat-1-w" }, text: true,}
        var up = {icons: { primary: "ui-icon-arrowthick-1-n" }, text: false,};
        var next = {icons: { secondary: "ui-icon-carat-1-e" }, text: true,}

        jQuery('#gs-group-messages-topic-navlinks a.prev').button(prev);
        jQuery('#gs-group-messages-topic-navlinks span.prev')
            .button(prev)
            .button("disable");
        jQuery('#gs-group-messages-topic-navlinks .up').button(up);
        jQuery('#gs-group-messages-topic-navlinks a.next').button(next);
        
        var sticky = {icons: {primary: "ui-icon-pin-s"}, text: true};
        jQuery('#gs-group-messages-topic-admin-stickytoggle-widget-checkbox')
          .button(sticky);
      </script>
    </tal:block>
  </body>
</html>

